
"use client";

import { useState, useEffect } from "react";
import { TodayView } from "@/components/views/today-view";
import { DaySimulator } from "@/components/day-simulator";
import { getTripDay } from "@/lib/date-utils";

export default function Home() {
  const [currentDay, setCurrentDay] = useState(1);
  const [isClient, setIsClient] = useState(false);

  useEffect(() => {
    // This effect runs only once on the client after hydration
    setCurrentDay(getTripDay());
    setIsClient(true);
  }, []);
  
  const handleDayChange = (day: number) => {
    setCurrentDay(day);
  };

  return (
    <>
      <TodayView currentDayNumber={currentDay} />
      {isClient && <DaySimulator currentDay={currentDay} onDayChange={handleDayChange} />}
    </>
  );
}
